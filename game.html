<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Dorfdulli Racing ‚Äì MX Runner</title>
  <style>
    :root { --bg:#070707; --fg:#f2f2f2; --muted:rgba(255,255,255,.65); }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial}
    .wrap{max-width:980px;margin:0 auto;padding:14px 14px 92px}
    h1{font-size:22px;margin:6px 0 6px}
    p{margin:0 0 10px;color:var(--muted)}
    .hud{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin:10px 0 12px}
    .chip{background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.12);border-radius:999px;padding:8px 12px;font-size:14px}
    button{background:rgba(255,255,255,.08);color:var(--fg);border:1px solid rgba(255,255,255,.18);border-radius:12px;padding:10px 12px;font-size:14px}
    button:active{transform:translateY(1px)}
    canvas{width:100%;height:auto;border-radius:18px;border:1px solid rgba(255,255,255,.12);touch-action:none;background:
      radial-gradient(120% 90% at 60% 20%, #1a1a1a 0%, #0a0a0a 55%, #050505 100%)}
    .controls{
      position:fixed;left:0;right:0;bottom:0;
      padding:12px 14px calc(12px + env(safe-area-inset-bottom));
      backdrop-filter:blur(10px);
      background:linear-gradient(to top, rgba(0,0,0,.78), rgba(0,0,0,.22));
      border-top:1px solid rgba(255,255,255,.10);
      display:flex;justify-content:center
    }
    .pad{max-width:980px;width:100%;display:grid;grid-template-columns:1fr 1fr 1fr 1fr;gap:10px}
    .pad button{height:56px;font-size:16px;border-radius:16px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>üèÅ MX Runner</h1>
    <p>Handy: Buttons unten. PC: ‚Üê ‚Üí lenken, ‚Üë Gas, ‚Üì Bremse, R Restart.</p>

    <div class="hud">
      <div class="chip" id="spd">Speed: 0</div>
      <div class="chip" id="dst">Dist: 0</div>
      <div class="chip" id="air">Air: 0.0s</div>
      <div class="chip" id="st">Status: Ready</div>
      <button id="rs" type="button">Restart</button>
    </div>

    <canvas id="c" width="980" height="540"></canvas>
  </div>

  <div class="controls">
    <div class="pad">
      <button id="brk" type="button">üõë Bremse</button>
      <button id="l" type="button">‚¨ÖÔ∏è Links</button>
      <button id="r" type="button">‚û°Ô∏è Rechts</button>
      <button id="gas" type="button">üî• Gas</button>
    </div>
  </div>

<script>
(() => {
  const canvas = document.getElementById("c");
  const ctx = canvas.getContext("2d");

  const elSpd = document.getElementById("spd");
  const elDst = document.getElementById("dst");
  const elAir = document.getElementById("air");
  const elSt  = document.getElementById("st");
  const btnRs = document.getElementById("rs");

  const btnGas = document.getElementById("gas");
  const btnBrk = document.getElementById("brk");
  const btnL   = document.getElementById("l");
  const btnR   = document.getElementById("r");

  const W = canvas.width, H = canvas.height;

  // Pseudo-3D road
  const SEG_LEN   = 24;
  const DRAW_DIST = 220;
  const ROAD_W    = 2200;
  const CAM_H     = 1500;
  const CAM_D     = 0.86;

  const col = {
    skyTop:"rgba(255,255,255,0.10)", skyBot:"rgba(255,255,255,0.00)",
    grass1:"rgba(255,255,255,0.03)", grass2:"rgba(255,255,255,0.06)",
    road1:"rgba(255,255,255,0.10)",  road2:"rgba(255,255,255,0.14)",
    edge:"rgba(255,255,255,0.26)", line:"rgba(255,255,255,0.30)"
  };

  // Build track: curves + hills + jumps
  const track = [];
  function add(n, curve, hill){ for(let i=0;i<n;i++) track.push({curve, hill}); }
  function hillPulse(n, amp){
    for(let i=0;i<n;i++){
      const t=i/(n-1);
      const v=Math.sin(t*Math.PI);              // 0..1..0
      track.push({curve:0, hill: amp*v});
    }
  }

  add(180, 0, 0);
  add(140, 0.6, 0);
  hillPulse(120, 1200);        // big jump
  add(120,-0.7, 0);
  // whoops
  for(let i=0;i<180;i++) track.push({curve:(i<90?0.25:-0.25), hill:(i%10<5?260:-260)});
  hillPulse(140, 1400);        // bigger jump
  add(240, 0.35, 0);
  while(track.length < 5200) add(80, 0